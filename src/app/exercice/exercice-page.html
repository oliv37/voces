<app-meta
  robots="noindex, nofollow"
  [description]="metaDescription()"
  [og]="metaOg()"
/>

<app-client-side>
  @if(word(); as word) {
  <div
    class="fixed top-0 left-0 h-1 w-full transition-all duration-700"
    [class.bg-white]="!isCompleted()"
    [class.bg-blue-600]="isCompleted()"
  ></div>

  <div
    class="flex flex-col items-center justify-around gap-8 min-h-[calc(100lvh-6rem)] cursor-default"
  >
    <div class="text-6xl text-gray-700 tracking-wide">{{ word.fr }}</div>

    @if (level() === 1) {
    <app-exercice-level-1
      #exerciceLevelCmp
      [word]="word.es"
      [example]="word.example"
      (next)="nextWord()"
    ></app-exercice-level-1>
    } @else if (level() === 2) {
    <app-exercice-level-2
      #exerciceLevelCmp
      [word]="word.es"
      (next)="nextWord()"
    ></app-exercice-level-2>
    }

    <div class="flex flex-col items-center gap-9">
      <app-exercice-progress-bar
        [wordIdx]="wordIdx()"
        [nbWords]="nbWords()"
        [progressPercent]="progressPercent()"
        [bgColor]="isGroupCompleted() ? 'bg-blue-600' : 'bg-gray-900'"
      />
      <app-exercice-button-bar
        [level]="level()"
        [currentWordGroupId]="wordGroup().id"
        [prevWordGroupId]="prevWordGroupId()"
        [nextWordGroupId]="nextWordGroupId()"
        [questionFillColor]="
          hasUsedHelp() ? 'fill-red-600' : 'fill-neutral-900'
        "
        [starFillColor]="
          isGroupCompleted()
            ? 'fill-blue-600'
            : 'fill-gray-900'
        "
        (levelChange)="setLevel($event)"
        (patchQuestion)="help()"
        (arrowClockwise)="resetLevel()"
      />
    </div>
  </div>
  }
</app-client-side>
